<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>

  <style>
    html,
    body {
      font-family: arial;
    }

    table {
      border-collapse: collapse;
    }

    table tr td {
      border: 1px solid #000;
      padding: 10px;
    }

    #Thead tr {
      border: 1px solid #000;
      padding: 10px;
    }

    #T0 {
      float: left;
    }

    #T1 {
      display: inline-block;
      float: left;
    }

    #T2 {
      display: inline-block;
      float: left;
    }

    #T3 {
      display: inline-block;
    }

    #search {}
  </style>
</head>

<body>
  <!-- <form>
    <label for="fname"><b>Search</b></label>

    <input  onkeyup="Filter()" id="search" type="search" placeholder="Search">
  </form>
  <br><br><br><br><br> -->
  <form style="float:right;width:auto; border:2px solid grey" onsubmit="return false">
    <input id="myInput" onkeyup="Filter()" type="text" placeholder="Search here ">

  </form>

  <form id="new_user" onsubmit="return false">

    <label for="fname">First Name</label>
    <input id="fname" type="text" required><br><br><br>

    <label for="lname">Last Name</label>
    <input id="lname" type="text" required><br><br><br>

    <label for="lname">Last Name</label>
    <input id="dob" type="date" name="" value="" required><br><br>

    <input id="one" onclick="func()" type="submit" name="Submit" [disabled]="!ngForm.valid">
  </form>

  <table id="go" border="1px" width="454px" height="40px">
    <tr height="40px">
      <th>First Name</th>
      <th>Last Name</th>
      <th>Date of Birth</th>
      <th>Age</th>
      <th>Action</th>
    </tr>
    <tr id="1">
      <td>Rishabh</td>
      <td>Jha</td>
      <td>1997-09-26</td>
      <td>22</td>
      <td> <button type="button" onclick="rem(1)" name="button">Delete</button> </td>
    </tr>
    <tr id="2">
      <td>Example</td>
      <td>One</td>
      <td>1997-16-09</td>
      <td>22</td>
      <td> <button type="button" onclick="rem(2)" name="button">Delete</button> </td>
    </tr>
  </table>
  <div id="container"></div>

  <script>
    document.getElementById('one').disabled

    var fnames = ["Rishabh", "Jha", "1997-09-26", "22",
      "Example", "One", "1997-16-09", "22"];


    function Filter() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("T0");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }

    }

    var form = document.getElementById("new_user");
    function handleForm(event) { event.preventDefault(); }
    form.addEventListener('submit', handleForm);

    function result() {
      nm = document.getElementById('fname').value;
      ln = document.getElementById('lname').value;
      db = document.getElementById('dob').value;
      fnames.push(nm);
      fnames.push(ln);
      fnames.push(db);
      console.log(fnames);



      return false;
    }
    var c = 0;
    function func() {
      result();
      var db = new Date(document.getElementById('dob').value);
      var age = calculate_age(db);
      fnames.push(age);

      createtable0();
      console.log(fnames);
      c += 1;

    }
    function calculate_age(dob) {
      var diff_ms = Date.now() - dob.getTime();
      var age_dt = new Date(diff_ms);
      console.log(diff_ms);
      console.log(age_dt);
      return Math.abs(age_dt.getUTCFullYear() - 1970);
    }

    function createtable0() {
      c += 1;
      if (c == 1) {
        document.getElementById("go").remove();

      }
      if (c > 2) {
        document.getElementById("T0").remove();
      }
      var perrow = 4, // 3 cells per row
        count = 0, // Flag for current cell
        id = 1,
        val = fnames.length - 4;
      table = document.createElement("table");
      table.setAttribute("id", "T0");
      var header = table.createTHead();
      h = header.insertRow();
      row = table.insertRow();
      var a = row.insertCell();
      a.innerHTML = "<b>First Name</b>";
      row.insertCell().innerHTML = "<b>Last Name</b>";
      row.insertCell().innerHTML = "<b>Date of Birth</b>";
      row.insertCell().innerHTML = "<b>Age</b>"
      row.insertCell().innerHTML = "<b>Action</b>"


      row = table.insertRow();
      row.setAttribute("id", id);
      id++;


      for (var i of fnames) {

        var cell = row.insertCell();
        cell.innerHTML = i;
        cell.setAttribute("id", id);
        count++;



        if (count % perrow == 0) {
          cell = row.insertCell();
          var btn = document.createElement('button');
          btn.type = "button";
          btn.value = "Delete";
          btn.innerHTML = "Delete"
          cell.appendChild(btn);
          btn.setAttribute("id", id);
          btn.onclick = function () { document.getElementById(table.rows[2].id).remove(); };
          console.log(id);
          row = table.insertRow();
          row.setAttribute("id", id);
          id += 1;

        }
      }

      // Attach table to container

      document.getElementById("container").appendChild(table);
    }
    function rem(id) {
      var myobj = document.getElementById(id);
      console.log(id);
      myobj.remove();
    }


  </script>
</body>

</html>
